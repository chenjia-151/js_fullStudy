<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .image-item{
            display: block;
            height: 200px;
            margin-bottom: 40px;
        }
    </style>
</head>
<body>
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazyload="true" data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=234997660,1387342489&fm=26&gp=0.jpg" alt="">

    <script>
        //  先拿到用户设备的可视区域的高度
        let viewHeight = document.documentElement.clientHeight
        // console.log(viewHeight);

        function lazyLoad(){
            let eles = document.querySelectorAll('img[data-original][lazyload]')
            // console.log(eles);
            // 判断每一个img是否出现在可视区域内
            // eles.forEach((item,index)=>{  // 对数组进行遍历
            //     console.log(item);
            // })
            Array.prototype.forEach.call(eles, function(item,index){
                // console.log(item);
                let rect;
                rect = item.getBoundingClientRect()  // 用于获取页面上某个元素的左上右下分别相对于浏览器视窗的位置
                console.log(rect);
                if(rect.bottom >= 0 && rect.top < viewHeight){  // 在可视区域内
                    !function(){   // 自执行函数
                        let img = new Image()  // img 标签 可以直接 new 一个新的img标签
                        img.src = item.dataset.original
                        img.onload = function(){
                            item.src = img.src
                        }
                        item.removeAttribute('data-original') // 移除属性，下次不再遍历
                        item.removeAttribute('lazyload')
                    }()
                }
            })
        }
        lazyLoad()
        document.addEventListener('scroll',lazyLoad)  // 监听页面滚动事件
    </script>
</body>
</html>